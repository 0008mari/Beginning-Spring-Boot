# 3 회원 관리 예제- 백엔드 개발

## 비즈니스 요구사항 정리

예제니까 임의로 정리해두었음. 매우 간단한 조건

* 데이터: 회원 ID, 이름
  * 이때 ID는 시스템이 갖고 있는 고유 번호
* 기능: 회원 등록, 조회
* 아직 데이터 저장소가 선정되지 않음.
  * 이후 구현에도 영향을 준다.

**일반적인 웹 애플리케이션 계층 구조**

* 컨트롤러: 웹 MVC 중 C
* 서비스: 핵심 비즈니스 로직 구현 (예: 회원 이름은 중복 불허)
* 리포지토리: DB에 접근해, 도메인 객체를 DB에 저장하고 관리한다.
* 도메인: 비즈니스 도메인 객체. 회원, 주문, 쿠폰, 등등. 주로 데이터베이스에 저장, 관리되는 대상.

**클래스 의존 관계**

* 저장소가 미선정. 따라서 MemberRepository는 interface로 구현
* 우선은 구현체로 가벼운 메모리 기반 데이터 저장소 사용.
* 나중에 RDB, NoSQL 이런 것들로 선정될 수 있음

## 회원 도메인과 리포지토리 만들기

hello.hellospring.domain 패키지 생성

클래스 생성: Member

hello.hellospring.repository 패키지 생성

인터페이스 생성: Member Repository

## 회원 리포지토리 테스트 케이스 작성

JUnit 프레임워크로 테스트 실행하여 문제 해결. 

* 어노테이션 `@Test`
* 어노테이션 `@AfterEach`
  * 각 Test는 테스트 순서에 영향을 받으면 안 된다. 다만 같은 데이터를 가지고 테스트할 때 저장소가 비워지지 않아 부딪히는 부분이 있다. AfterEach 메소드에서 각 테스트가 끝난 후 실행할 동작을 지정한다. 저장소 문제의 경우 clear를 하면 된다. 
* given... when... then
  * 테스트 코드 작성의 가장 기본적인 구조. 이러한 데이터, 상황이 주어질 때 (given) 이런 동작이 일어나고 (when) 그러면 이렇게 되어야 한다(then).
* Assertions
  * 여기서는 JUnit이 아니라 assertj 이용. 전구모양 아이콘 옵션 중에 앞머리를 import 해서 편하게 쓸 수 있는 옵션 있음 
  * `assertThat(1).isEqualTo(2);`
    * 1을 예상했다. 2는 1과 동일한가? 동일하면 테스트 무사 완료. 다르면 테스트에서 다르다고 나옴.

## 회원 서비스 개발

## 회원 서비스 테스트

* **Dependency Injection**
  * 코드 내부가 아니라 그 외부에서 인자로 repo를 넣어준다... 다음에 더 자세히 설명!
* `@BeforeEach` 각 테스트 실행 전에 호출됨. 예제에서는 각 테스트 간 영향이 없도록 저장소 새로 생성해주는 용도로 씀 



---

**인텔리제이 단축키**

Alt V 반환값이 있는 함수에 대해 자동으로 받는 변수 생성해줌

Ctrl Shift Enter 자동 완성 및 줄바꿈 (괄호 닫기, 세미콜론 등 자동으로 해줌)

Alt Ins 클래스 메소드 자동 추가 (게터세터, 제너레이터)

Ctrl F8 복붙한 코드의 변수명 일괄 변경

Alt Enter 필요한 패키지나 클래스 자동 import

---

**Java 문법**

* `Optional<T>` 반환값이 있을 수도 있고 null 일 수도 있는 상황에서 사용.

* `Map<키, 밸류>` HashMap
* 람다함수: 지금 하고 있는 책에서 곧 나옴 ㄱㄷ 

 